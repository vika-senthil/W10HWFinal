<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>Global Plane Crashes (1908–1947)</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <script src="https://cdn.jsdelivr.net/npm/vega@5"></script>
  <script src="https://cdn.jsdelivr.net/npm/vega-lite@5"></script>
  <script src="https://cdn.jsdelivr.net/npm/vega-embed@6"></script>
  <style>
    :root { --w: 980px; }
    body { font-family: system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif; margin:18px; background:#fafafa; }
    h1 { margin:0 0 6px; font-size:40px; }
    p.caption { color:#555; margin:0 0 18px; }
    .grid { display:grid; grid-template-columns:1fr; gap:22px; max-width:var(--w); }
    @media (min-width:1100px){ .grid{ grid-template-columns:1fr 1fr; align-items:start; } }
    .card { background:#fff; padding:12px; box-shadow:0 1px 6px rgba(0,0,0,.06); border-radius:10px; }
    .err { color:#b00020; font-weight:600; margin-top:8px; }
  </style>
</head>
<body>
  <h1>Global Plane Crashes (1908–1947)</h1>
  <p class="caption">Map shows each crash; circle size & colour = fatalities. Use the slider to view a single year.</p>

  <div class="grid">
    <div class="card">
      <div id="map"></div>
      <div id="mapErr" class="err"></div>
    </div>
    <div class="card">
      <div id="trend"></div>
      <div id="trendErr" class="err"></div>
    </div>
  </div>

  <script>
    const v='?v='+Date.now(); // cache-buster so you see updates
    vegaEmbed('#map','map.json'+v,{actions:false})
      .catch(e=>{document.getElementById('mapErr').textContent='Map error: '+(e.message||e); console.error(e);});
    vegaEmbed('#trend','trend.json'+v,{actions:false})
      .catch(e=>{document.getElementById('trendErr').textContent='Trend error: '+(e.message||e); console.error(e);});
  </script>
</body>
</html>
